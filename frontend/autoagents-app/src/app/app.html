<!-- Main Application Layout with Navigation -->
<div class="app-layout" [class.nav-collapsed]="navService.isCollapsed()">
  <!-- Sidebar Navigation -->
  <app-sidebar-nav></app-sidebar-nav>
  
  <!-- Main Content Area -->
  <div class="main-content-wrapper">
    <!-- Top Navigation Bar -->
    <header class="top-navbar">
      <div class="navbar-content">
        <div class="navbar-left">
          <!-- Back/Forward Navigation Arrows -->
          <div class="nav-arrows">
            <button 
              class="nav-arrow-btn"
              [disabled]="!canGoBack()"
              (click)="navigateBack()"
              aria-label="Navigate back">
              <mat-icon>arrow_back</mat-icon>
            </button>
            <button 
              class="nav-arrow-btn"
              [disabled]="!canGoForward()"
              (click)="navigateForward()"
              aria-label="Navigate forward">
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
          
          <!-- Breadcrumbs -->
          <nav class="breadcrumbs" aria-label="Breadcrumb">
            @for (crumb of navService.breadcrumbs(); track crumb.route; let last = $last) {
              @if (!last) {
                <a 
                  class="breadcrumb-link" 
                  [routerLink]="crumb.route"
                  (click)="$event.stopPropagation()">
                  {{ crumb.label }}
                </a>
                <span class="breadcrumb-separator">/</span>
              } @else {
                <span class="breadcrumb-current">{{ crumb.label }}</span>
              }
            }
          </nav>
        </div>
        
        <div class="navbar-right">
          <!-- System Status -->
          <div class="status-indicator">
            <span class="status-dot"></span>
            <span class="status-text">All Systems Operational</span>
          </div>
          
          <!-- Dev Mode Toggle -->
          <div class="dev-mode-toggle" [class.active]="devModeService.isDevMode()">
            <button class="dev-toggle-btn" (click)="toggleDevMode()">
              <span class="toggle-icon">{{ devModeService.isDevMode() ? 'üîß' : '‚öôÔ∏è' }}</span>
              <span class="toggle-label">DEV: {{ devModeService.isDevMode() ? 'ON' : 'OFF' }}</span>
            </button>
          </div>
        </div>
      </div>
    </header>
    
    <!-- Page Content -->
    <main class="page-content">
      <router-outlet />
    </main>
  </div>
</div>
